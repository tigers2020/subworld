{% extends 'base/base.html' %}
{% load widget_tweaks %}
{% load socialaccount %}
{% block body %}
    <div class="container mt-5">


        <div class="card">
            <div class="card-img-top">
                {% if movie %}
                    <img src="{{ image_url.base_url }}/{{ poster_size.w500 }}{{ movie.backdrop_path }}"/>

                {% endif %}
            </div>
            <div class="card-body">
                {% if movie %}
                    <h3>{{ movie.title }}</h3>
                {% endif %}
            </div>
            <div class="card-footer">
                {% if not user.is_authenticated %}
                    <a class="btn btn-danger" href="{% url "account_login" %}">Login</a>
                {% else %}
                    <h4>{{ user }}</h4>
                {% endif %}
            </div>
        </div>
        <div class="card m-3 p-2">

            <form class="form-elegant z-depth-1" method="post" action="{% url 'sub-upload' %}">

                {{ form.media }}

                {% for field in form %}
                    {{ field.widget_type }}
                    {% if field.html_name == "title" %}
                        {% render_field form.title value=movie.title class="form-control p-3" %}
                    {% elif field.html_name == "user" %}
                        {% render_field form.user value=user.id type="hidden" %}
                    {% else %}
                        {% if field|widget_type == "select" %}
                            {{ field|add_class:"mdb-select md-form p-3"|attr:"searchable:search here" }}
                        {% elif field|widget_type == "file" %}
                            <div class="file-upload-wrapper">
                                {{ field|add_class:"file-upload  p-3"|attr:"searchable:search here" }}
                            </div>
                        {% else %}
                            {{ field|add_class:"form-control p-3" }}
                        {% endif %}
                    {% endif %}
                    {#<div class="field {{ field|field_type }} {{ field|widget_type }} {{ field.html_name }}">#}
                    {#    {{ field }}#}
                    {#</div>#}
                {% endfor %}

                <button class="btn btn-success" type="submit">Upload</button>
            </form>

        </div>

    </div>
{% endblock %}


{% block script %}

    <script>
        $(document).ready(function () {
            $('.mdb-select').materialSelect();
        });


    </script>
    <script>

    </script>
{% endblock %}