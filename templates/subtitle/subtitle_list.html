{% extends 'base/base.html' %}

{% block keywords %}
    {% for keyword in keywords.keywords %}{{ keyword.name }}, {% endfor %}
{% endblock %}

{% block body %}
    <header>

        <div class="view jarallax" style="height: 30vh;">
            <img class="jarallax-img" src="https://image.tmdb.org/t/p/original{{ movie.backdrop_path }}"
                 style="background-position: top"
                 alt="{{ movie.title }}">
            <div class="mask rgba-blue-slight">
                <div class="container flex-center text-center">
                    <div class="row mt-5">
                        <div class="col-md-12 wow fadeIn mb-3">
                            <h2 class="display-3 mb-2 wow fadeInDown text-white" style="text-shadow: 2px 2px #000;"
                                data-wow-delay="0.3s">{{ movie.title }}</h2>
                            <h5 class="text-uppercase mb-3 mt-1 font-weight-bold wow fadeIn text-white"
                                style="text-shadow: 2px 2px #000;" data-wow-delay="0.4s">W{{ movie.tagline }}r</h5>

                        </div>
                    </div>
                </div>
            </div>
        </div>
    </header>

    <div class="container-fluid">
        <div class="row" style="margin-top: -100px">
            <div class="col-md-12 px-md-5">
                <ul class="nav nav-tabs nav-justified md-tabs indigo" id="myTabJust" role="tablist">
                    <li class="nav-item">
                        <a class="nav-link active" id="home-tab-just" data-toggle="tab" href="#information-just"
                           role="tab"
                           aria-controls="information-just"
                           aria-selected="true">Information</a>
                    </li>
                    <li class="nav-item">
                        <a class="nav-link" id="subtitle-tab-just" data-toggle="tab" href="#subtitle-just" role="tab"
                           aria-controls="subtitle-just"
                           aria-selected="false">Subtitles</a>
                    </li>
                </ul>
                <div class="tab-content card pt-5" id="myTabContentJust">
                    <div class="tab-pane fade show active" id="information-just" role="tabpanel"
                         aria-labelledby="information-tab-just">
                        <p>{{ movie.title }}</p>
                        <p>{{ movie.release_date }}</p>
                        <p>{{ movie.overview }}</p>
                        <h3 class="h3-responsive">Videos</h3>
                        <div class="text-center">
                            {% for video in videos.results %}
                                <button type="button" class="btn btn-info" data-toggle="modal"
                                        data-target="#video_{{ forloop.counter0 }}">{{ video.type }}</button>
                            {% endfor %}
                        </div>
                        {% for video in videos.results %}
                            <div class="modal fade" id="video_{{ forloop.counter0 }}" tabindex="-1" role="dialog"
                                 aria-labelledby="{{ video.name }}" aria-hidden="true">
                                <div class="modal-dialog modal-dialog-centered modal-lg" role="document">
                                    <!--Content-->
                                    <div class="modal-content">
                                        <!--Body-->
                                        <div class="modal-body mb-0 p-0">
                                            <div class="embed-responsive embed-responsive-16by9 z-depth-1-half">
                                                <iframe class="embed-responsive-item"
                                                        src="https://www.youtube.com/embed/{{ video.key }}"
                                                        allowfullscreen></iframe>
                                            </div>
                                        </div>
                                    </div>
                                    <!--/.Content-->
                                </div>
                            </div>
                        {% endfor %}
                        <h3 class="h3-responsive">Actors</h3>
                        <div class="row">
                            {% for person in persons.cast %}
                                <div class="col-lg-2 col-md-3 col-sm-4 p-3">
                                    <div class="card">
                                        <div class="card-img-top overlay zoom">
                                            {% if person.profile_path %}
                                                <img class="img-fluid"
                                                     src="https://image.tmdb.org/t/p/w500{{ person.profile_path }}"
                                                     alt="{{ person.name }}"/>
                                            {% else %}
                                                <p class="text-center">{{ person.name }}</p>
                                            {% endif %}
                                        </div>
                                        <div class="card-body">
                                            <h6 class=" pink-text h6-responsive">{{ person.character }}</h6>
                                            <h6 class="title h6-responsive">{{ person.name }}</h6>
                                        </div>
                                    </div>
                                </div>
                            {% endfor %}
                        </div>


                        <h3 class="h3-responsive">Companies</h3>
                        <div class="row">
                            {% for production_company in movie.production_companies %}
                                <div class="col-md-3">
                                    <div class="card">
                                        <div class="card-body text-center align-middle">
                                            {% if production_company.logo_path %}
                                                <img src="https://image.tmdb.org/t/p/w500{{ production_company.logo_path }}"
                                                     alt="{{ production_company.name }}" class="img-thumbnail"/>
                                            {% else %}
                                                <p>{{ production_company.name }}</p>
                                            {% endif %}

                                        </div>
                                    </div>
                                </div>
                            {% endfor %}
                        </div>

                    </div>
                    <div class="tab-pane fade" id="subtitle-just" role="tabpanel" aria-labelledby="subtitle-tab-just">

                        <p>
                            {% if not subtitle_list %}
                                <h5>There is no Subtitle for {{ movie.title }}</h5>

                                <h6> Be the First upload Subtitle for this movie/Tv Show</h6>
                                <form method="get" action="{% url "sub-upload" %}" class="text-center">
                                    <input class="form-control" type="hidden" name="movie_id" value="{{ movie.id }}"/>
                                    <button class="btn btn-action" type="submit">Upload Subtitle</button>

                                </form>
                            {% else %}
                                {{ subtitle_list }}
                            {% endif %}

                        </p>
                        <p>Etsy mixtape wayfarers, ethical wes anderson tofu before they sold out mcsweeney's organic
                            lomo retro
                            fanny pack lo-fi farm-to-table readymade. Messenger bag gentrify pitchfork tattooed craft
                            beer, iphone
                            skateboard locavore carles etsy salvia banksy hoodie helvetica. DIY synth PBR banksy irony.
                            Leggings
                            gentrify squid 8-bit cred pitchfork. Williamsburg banh mi whatever gluten-free, carles
                            pitchfork
                            biodiesel fixie etsy retro mlkshk vice blog. Scenester cred you probably haven't heard of
                            them, vinyl
                            craft beer blog stumptown. Pitchfork sustainable tofu synth chambray yr.</p>
                    </div>
                </div>
            </div>
        </div>

    </div>
{% endblock %}

{% block script %}
    <script>
        // object-fit polyfill run
        objectFitImages();

        /* init Jarallax */
        jarallax(document.querySelectorAll('.jarallax'));

        jarallax(document.querySelectorAll('.jarallax-keep-img'), {
            keepImg: true,
        });
    </script>
{% endblock %}